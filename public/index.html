<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lakers Hub 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ä¿æŒä¹‹å‰çš„ CSS æ ·å¼ï¼Œä¸ºäº†èŠ‚çœç¯‡å¹…ï¼Œè¿™é‡Œä½¿ç”¨äº†å‹ç¼©ç‰ˆæ ·å¼ï¼Œæ˜¾ç¤ºæ•ˆæœä¸€æ · */
        :root{--purple:#552583;--gold:#FDB927;--bg:#121212;--card:#1e1e1e;--text:#fff;--sub:#b3b3b3}
        *{box-sizing:border-box;margin:0;padding:0}body{background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;padding-bottom:50px}
        header{background:linear-gradient(180deg,rgba(85,37,131,0.9) 0%,rgba(18,18,18,0) 100%);padding:30px 20px 15px;text-align:center}
        h1{font-family:'Bebas Neue',sans-serif;font-size:3rem;color:var(--gold);margin:0}.sub{font-size:0.8rem;color:var(--sub);text-transform:uppercase}
        .container{max-width:600px;margin:0 auto;padding:20px}
        .card{background:var(--card);border-radius:12px;padding:16px;margin-bottom:16px;display:flex;justify-content:space-between;align-items:center;border-left:4px solid transparent}
        .card.home{border-left-color:var(--gold)}.card.away{border-left-color:#555}
        .info{display:flex;align-items:center;gap:10px}.logo{width:40px;height:40px;object-fit:contain}
        .meta{text-align:right}.time{font-size:0.9rem;font-weight:700}.date{font-size:0.75rem;color:var(--sub)}
        .badge{padding:4px 8px;border-radius:4px;font-size:0.75rem;font-weight:700;margin-top:5px;display:inline-block}
        .live{background:#e53e3e;color:#fff;animation:pulse 1.5s infinite}.final{background:#333;color:#aaa}
        .win{color:#48bb78}.loss{color:#f56565}
        @keyframes pulse{0%{opacity:1}50%{opacity:.6}100%{opacity:1}}
        .refresh{background:0 0;border:1px solid var(--purple);color:var(--purple);padding:8px 20px;border-radius:20px;margin:0 auto 20px;display:block;cursor:pointer}
    </style>
</head>
<body>
    <header>
        <h1>LAKERS HUB</h1>
        <p class="sub">Vercel Edition</p>
    </header>
    <div class="container">
        <button class="refresh" onclick="loadData()">ğŸ”„ åˆ·æ–°èµ›ç¨‹</button>
        <div id="list" style="text-align:center;margin-top:50px;color:#666">æ­£åœ¨è¿æ¥äº‘ç«¯ API...</div>
    </div>

    <script>
        async function loadData() {
            const list = document.getElementById('list');
            list.innerHTML = 'æ­£åœ¨åŠ è½½...';
            
            try {
                // å…³é”®ç‚¹ï¼šè¿™é‡Œç›´æ¥è¯·æ±‚ Vercel åç«¯ï¼Œä¸è·¨åŸŸï¼Œæå¿«
                const res = await fetch('/api/schedule'); 
                const json = await res.json();
                
                if (json.events) render(json.events);
                else throw new Error('No data');
            } catch (e) {
                list.innerHTML = 'åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
                console.error(e);
            }
        }

        function render(events) {
            const list = document.getElementById('list');
            list.innerHTML = '';
            
            events.forEach(e => {
                const g = e.competitions[0];
                const lakers = g.competitors.find(c => c.team.id === '13');
                const opp = g.competitors.find(c => c.team.id !== '13');
                const isHome = lakers.homeAway === 'home';
                const date = new Date(g.date);
                
                let status = `<span class="badge" style="color:#666">å³å°†å¼€å§‹</span>`;
                if(g.status.type.state === 'in') status = `<span class="badge live">LIVE: ${lakers.score.value}-${opp.score.value}</span>`;
                if(g.status.type.state === 'post') {
                    const win = parseInt(lakers.score.value) > parseInt(opp.score.value);
                    status = `<span class="badge final"><span class="${win?'win':'loss'}">${win?'W':'L'}</span> ${lakers.score.value}-${opp.score.value}</span>`;
                }

                const html = `
                <div class="card ${isHome?'home':'away'}" onclick="window.open('${e.links[0].href}')">
                    <div class="info">
                        <img src="${opp.team.logos[0].href}" class="logo">
                        <div>
                            <div style="font-size:0.7rem;color:#888">${isHome?'ä¸»åœº vs':'å®¢åœº @'}</div>
                            <div style="font-weight:700">${opp.team.shortDisplayName}</div>
                        </div>
                    </div>
                    <div class="meta">
                        <div class="time">${date.toLocaleTimeString('zh-CN',{hour:'2-digit',minute:'2-digit'})}</div>
                        <div class="date">${date.toLocaleDateString('zh-CN',{month:'short',day:'numeric'})}</div>
                        ${status}
                    </div>
                </div>`;
                list.insertAdjacentHTML('beforeend', html);
            });
        }
        
        loadData();
    </script>
</body>
</html>